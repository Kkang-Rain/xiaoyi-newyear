<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ç»™å°æ€¡çš„æ–°å¹´ç¥ç¦</title>

<style>
html, body {
  margin: 0;
  padding: 0;
  width: 100%;
  height: 100%;
  background: radial-gradient(circle at top, #1b1f3b, #000);
  overflow: hidden;
  font-family: "PingFang SC", "Microsoft YaHei", sans-serif;
}

canvas {
  position: fixed;
  inset: 0;
  z-index: 1;
}

.text {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  color: #fff;
  font-size: 24px;
  text-align: center;
  line-height: 1.9;
  letter-spacing: 1px;
  z-index: 5;
  opacity: 0;
  transition: opacity 1.2s ease;
  pointer-events: none;
  text-shadow: 0 0 20px rgba(255,255,255,.3);
  padding: 0 18px;
}

.tip {
  position: fixed;
  bottom: 18px;
  left: 50%;
  transform: translateX(-50%);
  color: rgba(255,255,255,.85);
  font-size: 14px;
  z-index: 10;
  animation: blink 1.5s infinite;
}

@keyframes blink {
  0%,100% { opacity: .3 }
  50% { opacity: 1 }
}
</style>
</head>

<body>

<canvas id="canvas"></canvas>
<div class="text" id="text"></div>
<div class="tip">ğŸµ ç‚¹ä¸€ä¸‹å±å¹•ï¼ŒéŸ³ä¹å’ŒçƒŸèŠ±ä¸€èµ·å¼€å§‹</div>

<audio id="bgm" src="music.mp3" preload="auto" loop playsinline webkit-playsinline></audio>

<script>
/* ===== Canvas ===== */
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");
function resize(){
  canvas.width = innerWidth;
  canvas.height = innerHeight;
}
resize();
addEventListener("resize", resize);

/* ===== Music ===== */
const bgm = document.getElementById("bgm");
let musicStarted = false;
function startMusic(){
  if(musicStarted) return;
  bgm.play().then(()=>musicStarted=true).catch(()=>{});
}
["click","touchstart","pointerdown"].forEach(e=>{
  document.addEventListener(e,startMusic);
});

/* ===== Fireworks ===== */
const particles = [];
function firework(x,y,count=120){
  for(let i=0;i<count;i++){
    particles.push({
      x,y,
      vx:(Math.random()-0.5)*7,
      vy:(Math.random()-0.5)*7,
      life:110,
      color:`hsl(${Math.random()*360},100%,65%)`
    });
  }
}

function animate(){
  requestAnimationFrame(animate);
  ctx.fillStyle="rgba(0,0,0,0.25)";
  ctx.fillRect(0,0,canvas.width,canvas.height);

  for(let i=particles.length-1;i>=0;i--){
    const p=particles[i];
    p.x+=p.vx;
    p.y+=p.vy;
    p.vy+=0.04;
    p.life--;

    ctx.beginPath();
    ctx.fillStyle=p.color;
    ctx.arc(p.x,p.y,2.2,0,Math.PI*2);
    ctx.fill();

    if(p.life<=0) particles.splice(i,1);
  }
}
animate();

/* ===== èƒŒæ™¯æŒç»­çƒŸèŠ±ï¼ˆæ–‡å­—æœŸé—´ï¼‰ ===== */
let backgroundFirework = setInterval(()=>{
  firework(
    Math.random()*canvas.width,
    Math.random()*canvas.height*0.7,
    40
  );
}, 900);

/* ===== Heart ===== */
function heart(){
  const cx=canvas.width/2, cy=canvas.height/2;
  for(let t=0;t<Math.PI*2;t+=0.04){
    const x=cx+16*Math.pow(Math.sin(t),3)*12;
    const y=cy-(13*Math.cos(t)-5*Math.cos(2*t)-2*Math.cos(3*t)-Math.cos(4*t))*12;
    firework(x,y,4);
  }
}

/* ===== Text ===== */
const textEl=document.getElementById("text");
function showText(str){
  textEl.style.opacity=0;
  setTimeout(()=>{
    textEl.innerHTML=str;
    textEl.style.opacity=1;
    firework(canvas.width/2, canvas.height/2, 120);
  },600);
}

/* ===== Timeline ===== */
const timeline = [
  "å°æ€¡ âœ¨",
  "å½“è¿™ä¸€å¹´çš„æ—¶é—´<br>æ…¢æ…¢èµ°åˆ°è¿™é‡Œ",
  "ä½ ä¹Ÿè®¸ç»å†äº†å¾ˆå¤š<br>å¼€å¿ƒçš„ Â· ä¸å¼€å¿ƒçš„",
  "æœ‰äº›æ—¶å€™ä½ å¾ˆåšå¼º<br>æœ‰äº›æ—¶å€™ä½ ä¹Ÿä¼šå·å·ç´¯",
  "ä½†ä¸ç®¡æ€æ ·<br>ä½ éƒ½èµ°åˆ°äº†ç°åœ¨",
  "æ–°çš„ä¸€å¹´è¦å¼€å§‹äº†",
  "å¸Œæœ›ä½ ä¸ç”¨é‚£ä¹ˆè¾›è‹¦<br>ä¹Ÿèƒ½è¢«ç”Ÿæ´»æ¸©æŸ”å¯¹å¾…",
  "å¸Œæœ›ä½ ç´¯çš„æ—¶å€™<br>æœ‰äººæ‡‚ä½ çš„æ²‰é»˜",
  "å¸Œæœ›ä½ éš¾è¿‡çš„æ—¶å€™<br>ä¸ç”¨ä¸€ä¸ªäººæ‰›",
  "ä¹Ÿå¸Œæœ›ä½ å¼€å¿ƒçš„æ—¶å€™<br>ç¬‘å¾—æ¯”çƒŸèŠ±è¿˜äº®",
  "æ„¿ä½ è¢«çˆ±åŒ…å›´<br>è¢«ç†è§£ Â· è¢«çæƒœ",
  "æ„¿ä½ å¹³å®‰ Â· å¥åº· Â· å¿ƒå®‰",
  "å¦‚æœæœ‰ä¸€å¤©ä½ è§‰å¾—è¿·èŒ«",
  "è¯·è®°å¾—<br>ä½ æœ¬èº«å°±å¾ˆå€¼å¾—",
  "æ–°å¹´å¿«ä¹ï¼Œå°æ€¡ ğŸ’–"
];

timeline.forEach((t,i)=>{
  setTimeout(()=>showText(t), i*2600 + 1000);
});

/* ===== æœ€ç»ˆé«˜æ½® ===== */
setTimeout(()=>{
  clearInterval(backgroundFirework);
  heart();
}, timeline.length*2600 + 2000);

setTimeout(()=>{
  showText("ğŸ† æ–°å¹´å¿«ä¹ï¼Œå°æ€¡ ğŸ†<br>æ„¿æœªæ¥çš„æ¯ä¸€å¤©<br>éƒ½æœ‰å…‰ Â· æœ‰çˆ± Â· æœ‰æ¸©æŸ”");
  for(let i=0;i<35;i++){
    setTimeout(()=>{
      firework(Math.random()*canvas.width,Math.random()*canvas.height,200);
    },i*120);
  }
}, timeline.length*2600 + 6000);

/* ç‚¹å‡»æ”¾çƒŸèŠ± */
addEventListener("click",e=>{
  firework(e.clientX,e.clientY,100);
});
</script>
</body>
</html>
